import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css             */import{M as u}from"./main-FYAW3UC_.js";function C(e){const t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)"));return t?decodeURIComponent(t[1]):null}const i=C("chapterId"),c=document.getElementById("status"),m=document.getElementById("content"),I=document.getElementById("useSaver"),x=document.getElementById("reload"),f=document.getElementById("openBase"),y=document.getElementById("openMangaPage");let g=null;function E(){g&&(y.href=`/manga.html?id=${g}`,y.style.display="inline-block")}async function b(e){try{const t=e.relationships?.find(s=>s.type==="manga");if(!t)return;const p=t.id,a=e.attributes||{};let n=parseInt(a.chapter||"0");(!n||n<1)&&(n=1);const o=a.title&&a.title.trim().length>0?a.title:`Chapter ${n}`,r={mangaExternalId:p,lastChapterId:i,language:a.translatedLanguage||"unknown",lastChapterTitle:o,lastChapterNumber:n};await apiFetch("/api/history",{method:"POST",body:JSON.stringify(r)})}catch(t){console.warn("Не удалось сохранить историю:",t)}}async function h(){if(!i){c.textContent="Не передано chapterId";return}c.textContent="Завантаження розділу...";try{const e=await u.callProxy(`/chapter/${i}`),t=e?.data||e;g=t?.relationships?.find(l=>l.type==="manga")?.id||null,E(),t&&await b(t);const a=await u.callProxy(`/at-home/server/${i}`),n=a?.baseUrl,o=a?.chapter||{},r=o.hash,s=(I.checked?o.dataSaver:o.data)||[];if(!n||!r||!s.length){c.textContent="Немає доступних сторінок для цього розділу";return}c.textContent=`Сторінок: ${s.length}`,f.href=n,f.textContent="Відкрити baseUrl",m.innerHTML="";for(const l of s){const d=document.createElement("img");d.src=`${n}/data/${r}/${l}`,d.alt=l,m.appendChild(d)}}catch(e){c.textContent="Помилка завантаження сторінок: "+(e.message||e),m.innerHTML=""}}x.addEventListener("click",h);I.addEventListener("change",h);h();
