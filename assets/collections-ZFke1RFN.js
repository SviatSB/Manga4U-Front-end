import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css                    *//* empty css             */import"./api.client-Cwoejsn1.js";import"./main-FYAW3UC_.js";const u={Favorite:"‚≠ê –£–ª—é–±–ª–µ–Ω—ñ",Reading:"üìñ –ß–∏—Ç–∞—é",WantToRead:"üìå –•–æ—á—É –ø—Ä–æ—á–∏—Ç–∞—Ç–∏",Completed:"‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω—ñ"},r=document.getElementById("systemCollections"),d=document.getElementById("userCollections"),p=document.getElementById("createCollectionBtn");async function c(){r.innerHTML="–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...",d.innerHTML="–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...";try{const t=await apiFetch("/api/Collection/system"),n=await apiFetch("/api/Collection/user");m(r,t,!0),m(d,n,!1)}catch(t){console.error(t),r.innerHTML="–ü–æ–º–∏–ª–∫–∞",d.innerHTML="–ü–æ–º–∏–ª–∫–∞"}}function m(t,n,a){if(t.innerHTML="",!n?.length){t.innerHTML="<div class='empty'>–ù–µ–º–∞—î –∫–æ–ª–µ–∫—Ü—ñ–π</div>";return}n.forEach(async e=>{const i=a&&u[e.name]||e.name;let o=0;try{o=(await apiFetch(`/api/Collection/${e.id}`)).mangas?.length??0}catch{console.warn("–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –º–∞–Ω–≥–∏ –∫–æ–ª–µ–∫—Ü—ñ—ó",e.id)}const s=document.createElement("div");s.className=`collection-item ${a?"system":""}`,s.innerHTML=`
            <div class="collection-title">${i}</div>
            <div class="collection-count">–ú–∞–Ω“ë: ${o}</div>

            ${a?"":`<div class="collection-actions">
                    <button class="action-btn rename" data-id="${e.id}">‚úè –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</button>
                    <button class="action-btn visibility" data-id="${e.id}">
                        ${e.isPublic?"üëÅ –ü—É–±–ª—ñ—á–Ω–∞":"üôà –ü—Ä–∏–≤–∞—Ç–Ω–∞"}
                    </button>
                    <button class="action-btn delete" data-id="${e.id}">üóë –í–∏–¥–∞–ª–∏—Ç–∏</button>
                </div>`}
        `,s.addEventListener("click",l=>{l.target.closest(".action-btn")||(window.location.href=`/collection.html?id=${e.id}`)}),t.appendChild(s)})}p.addEventListener("click",async()=>{const t=prompt("–ù–∞–∑–≤–∞ –∫–æ–ª–µ–∫—Ü—ñ—ó:");t&&(await apiFetch("/api/Collection",{method:"POST",body:JSON.stringify(t)}),c())});document.addEventListener("click",async t=>{const n=t.target.closest(".delete"),a=t.target.closest(".rename"),e=t.target.closest(".visibility");if(n){const i=n.dataset.id;return confirm("–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é?")?(await apiFetch(`/api/Collection/${i}`,{method:"DELETE"}),c()):void 0}if(a){const i=a.dataset.id,o=prompt("–ù–æ–≤–∞ –Ω–∞–∑–≤–∞:");return o?(await apiFetch(`/api/Collection/${i}/rename`,{method:"POST",body:JSON.stringify(o)}),c()):void 0}if(e){const i=e.dataset.id,o=await apiFetch(`/api/Collection/${i}`);return await apiFetch(`/api/Collection/${i}/visibility`,{method:"POST",body:JSON.stringify(!o.isPublic)}),c()}});c();
